- defaults:
    link:
      create: true # Create target directories if they don't exist
      force: true # Overwrite existing files with symlinks
      relink: true # Relink existing symlinks if they already exist     force: true

- shell:
    - description: "Install Homebrew if not already installed"
      command: |
        if ! command -v brew &>/dev/null; then
          /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
        fi

    - description: "Download fzf-git.sh into ~/lib"
      command: |
        mkdir -p ~/lib
        curl -o ~/lib/fzf-git.sh https://raw.githubusercontent.com/junegunn/fzf-git.sh/main/fzf-git.sh
        chmod +x ~/lib/fzf-git.sh

- tap:
    - FelixKratz/formulae
    - nikitabobko/tap
    - railwaycat/emacsmacport

# Install command-line tools
- brew:
    - odin
    - fzf
    - fd
    - bat
    - git-delta
    - eza
    - tldr
    - thefuck
    - tmux
    - tree-sitter
    - sublime-text
    - neovim
    - zsh-autosuggestions
    - zsh-syntax-highlighting
    - emacs-mac --with-modules
# Install cask apps
- cask:
    - ghostty
    - sf-symbols
    - font-meslo-lg-nerd-font
    - font-sf-pro
    - font-hack-nerd-font

- link:
    ~/.editorconfig: editorconfig
    ~/.tmux.conf: tmux.conf
    ~/.config/karabiner:
      path: karabiner/*
      glob: "*"
    ~/.config/zed/settings.json: zed/settings.json
    ~/Library/Application Support/Sublime Text/Packages/User/:
      path: sublime/*
      glob: "*"
    ~/dev/odin/ols.json: odin/ols.json
    ~/.config/git: git
    ~/.config/aerospace: aerospace
    ~/.config/sketchybar: sketchybar
    ~/.config/nvim: nvim
    ~/.config/doom: doom
    ~/.zshrc: zsh/zshrc
    ~/.zprofile: zsh/zprofile
    ~/.zshenv: zsh/zshenv
    ~/.config/htop/htoprc: htop/htoprc

- shell:
    - description: "Link Emacs Mac port to Applications"
      command: |
        ln -sf /usr/local/opt/emacs-mac/Emacs.app /Applications/Emacs.app

    - description: "Install Doom Emacs"
      command: |
        git clone --depth 1 https://github.com/doomemacs/doomemacs ~/.config/emacs
        ~/.config/emacs/bin/doom install
