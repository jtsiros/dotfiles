- defaults:
    link:
      force: true
      relink: true

- shell:
    - description: "Install Homebrew if not already installed"
      command: |
        if ! command -v brew &>/dev/null; then
          /bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"
        fi

    - description: "Download fzf-git.sh into ~/lib"
      command: |
        mkdir -p ~/lib
        curl -o ~/lib/fzf-git.sh https://raw.githubusercontent.com/junegunn/fzf-git.sh/main/fzf-git.sh
        chmod +x ~/lib/fzf-git.sh

    - description: "Install icons for Sketchybar"
      command: |
        curl -L https://github.com/kvndrsslr/sketchybar-app-font/releases/download/v1.0.16/sketchybar-app-font.ttf -o $HOME/Library/Fonts/sketchybar-app-font.ttf

- tap:
    - FelixKratz/formulae
    - nikitabobko/tap
    - railwaycat/emacsmacport

# Install command-line tools
- brew:
    - fzf
    - fd
    - bat
    - git-delta
    - eza
    - tldr
    - thefuck
    - tmux
    - tree-sitter
    - neovim
    - aerospace
    - sketchybar
    - zsh-autosuggestions
    - zsh-syntax-highlighting
    - emacs-mac --with-modules
    - font-meslo-lg-nerd-font
    - font-sf-pro
    - font-hack-nerd-font

# Install cask apps
- cask:
    - wezterm
    - nikitabobko/tap/aerospace

- link:
    ~/.tmux.conf: tmux.conf
    ~/.config/alacritty/alacritty.yml: alacritty/alacritty.yml
    ~/.config/git: git
    ~/.config/aerospace: aerospace
    ~/.config/sketchybar: sketchybar
    ~/.config/nvim: nvim
    ~/.config/doom: doom
    ~/.zshrc: zsh/zshrc
    ~/.zprofile: zsh/zprofile
    ~/.zshenv: zsh/zshenv
    ~/.config/htop/htoprc: htop/htoprc
    ~/.wezterm.lua: .wezterm.lua

- shell:
    - description: "Link Emacs Mac port to Applications"
      command: |
        ln -sf /usr/local/opt/emacs-mac/Emacs.app /Applications/Emacs.app

    - description: "Install Doom Emacs"
      command: |
        git clone --depth 1 https://github.com/doomemacs/doomemacs ~/.config/emacs
        ~/.config/emacs/bin/doom install

- shell:
    - [git submodule update --init --recursive, Installing submodules]
